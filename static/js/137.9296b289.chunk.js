"use strict";(self.webpackChunkgrabber_hrm=self.webpackChunkgrabber_hrm||[]).push([[137],{2137:function(e,a,n){n.r(a);var i=n(9439),l=n(2791),s=n(2735),t=n(2647),r=(n(2004),n(9760)),d=n(5945),c=n(5408),o=n(15),u=n(184),v=(0,t.PU)(),h=(0,t.YZ)(),m=function(e){var a=e.onConfirm,n=e.onCancel,t=e.init,r=e.last,d=e.isRange,c=e.appoitmentType,o=(0,l.useState)(t),v=(0,i.Z)(o,2),h=v[0],m=v[1],x=(0,l.useState)(r),p=(0,i.Z)(x,2),_=p[0],g=p[1],y=(0,l.useState)(!1),N=(0,i.Z)(y,2),D=N[0],b=N[1],C=(0,l.useState)(!1),w=(0,i.Z)(C,2),T=w[0],k=w[1],F=(0,l.useState)(null),I=(0,i.Z)(F,2),M=I[0],Z=I[1],S=function(){T?k(!1):n()};return(0,u.jsxs)("div",{className:"dateBox darkmode",children:[(0,u.jsx)("div",{className:"date_header_box",children:(0,u.jsx)("div",{className:"date_header_title",children:d?"Select Ranges":"Escojer Dia"})}),(0,u.jsxs)("div",{className:"_dsplFlx date_calendar_header",children:[(0,u.jsx)("div",{className:"date_range_title",children:h?(0,s.kj)(h):"Start Date"}),d?(0,u.jsx)("div",{className:"date_range_space_title",children:" - "}):null,d?(0,u.jsx)("div",{className:"date_range_title",children:_?(0,s.kj)(_):"End Date"}):null,(0,u.jsx)("div",{className:"flexSpace"})]}),T?(0,u.jsx)(j,{onChange:Z,date:h,selected:M,close:S}):(0,u.jsx)(f,{onChangeDate:function(e){c?(g(null),b(!0),m(e),k(!0)):d&&D&&e>h?(g(e),b(!1)):(m(e),g(null),b(!0))},init:h,last:_,isRange:d,appoitmentType:c}),(0,u.jsxs)("div",{className:"_dsplFlx calendar_action_group",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{onClick:S,size:40,className:"_dsplFlx",children:(0,u.jsx)("div",{className:"btn_cal_cancel",children:"Cancel"})}),(0,u.jsx)("div",{onClick:function(){c?(k(!1),a({initDate:h,appTimeSelected:M})):(d&&h&&_||h)&&a({initDate:h,lastDate:_})},children:(0,u.jsx)("div",{className:"_dsplFlx",style:{marginLeft:16,marginRight:8},children:(0,u.jsx)("div",{className:"btn_cal_confirm",children:"OK"})})})]})]})};a.default=function(e){var a=e.data,n=e.onConfirm,i=e.initValue,l=e.init,s=e.last,t=e.isRange,d=e.appoitmentType;(0,c.Z)("fb_updated_1128h");return(0,u.jsx)(m,{onConfirm:function(e){null===n||void 0===n||n(e),a.modalID&&(0,r.CloseModal)({id:a.modalID})},onCancel:function(){a.modalID&&(0,r.CloseModal)({id:a.modalID})},initValue:i,init:l,last:s,isRange:t,appoitmentType:d})};var f=function(e){var a=e.init,n=e.last,t=e.onChangeDate,r=e.isRange,c=e.appoitmentType,o=(0,l.useState)((new Date).getFullYear()),h=(0,i.Z)(o,2),m=h[0],f=h[1],p=(0,l.useState)((new Date).getMonth()),j=(0,i.Z)(p,2),g=j[0],y=j[1],N=(0,l.useState)([]),D=(0,i.Z)(N,2),b=D[0],C=D[1],w=(0,l.useState)(!1),T=(0,i.Z)(w,2),k=T[0],F=T[1],I=(0,l.useState)(1),M=(0,i.Z)(I,2),Z=(M[0],M[1]);(0,l.useEffect)((function(){var e=m+"_"+g;return(0,d.hW)(e),C((0,s.ul)(g,m)),setTimeout((function(){Z((0,s.M5)())}),350),function(){}}),[g,m]);var S=s.f2.es[g+1],A=function(e){if(g+e>11||g+e<0){var a=g+e>11?0:g+e<0?11:g+e,n=g+e>11?m+1:g+e<0?m-1:m;y(a),f(n)}else y(g+e)},J=c&&m===(new Date).getFullYear()&&g<=(new Date).getMonth();return(0,u.jsxs)("div",{style:{marginLeft:4},children:[(0,u.jsxs)("div",{className:"_dsplFlx date_calendar_header",children:[(0,u.jsx)("div",{onClick:function(){return F(!k)},size:40,children:(0,u.jsxs)("div",{className:"_dsplFlx",style:{padding:8},children:[(0,u.jsx)("div",{className:"date_calendar_header_yearmonth",children:S}),(0,u.jsx)("div",{className:"date_calendar_header_yearmonth",children:m}),(0,u.jsx)("div",{style:{paddingHorizontal:2},children:(0,u.jsx)(v,{name:"arrow_drop_down",size:24,color:"var(--light-300)"})})]})}),(0,u.jsx)("div",{className:"flexSpace"}),!k&&(0,u.jsx)("div",{className:"_dsplFlx ".concat(J?"disabled":""),children:(0,u.jsx)("div",{style:{borderRadius:50},children:(0,u.jsx)("div",{style:{padding:"0 2px",marginRight:12},onClick:function(e){J||A(-1)},children:(0,u.jsx)(v,{name:"arrow_left",size:24,color:"var(--light-200)"})})})}),k?null:(0,u.jsx)("div",{className:"_dsplFlx",children:(0,u.jsx)("div",{style:{borderRadius:50},children:(0,u.jsx)("div",{style:{padding:"0 2px"},onClick:function(){return A(1)},children:(0,u.jsx)(v,{name:"arrow_right",size:24,color:"var(--light-200)"})})})})]}),k?(0,u.jsx)(_,{year:m,onChange:function(e){f(e),F(!1)}}):(0,u.jsx)(x,{year:m,month:g,calendarData:b,onChange:function(e){var a=e&&new Date(m,g,e).getTime();a&&t(a)},init:a,last:n,range:r,appoitmentType:c})]})},x=function(e){var a=e.year,n=e.month,i=e.calendarData,l=e.onChange,t=e.init,r=e.last,d=e.range,c=e.appoitmentType,o=864e5,v=Math.floor(t/o),h=Math.floor(r/o),m=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate()),f=(0,s.bh)("AppointmentsDates");return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"_dsplFlx date_calendar_week_title",children:s.$l.en.map((function(e,a){return(0,u.jsx)("div",{className:"date_calendar_week_title_day",children:e},e+"_"+a)}))}),(0,u.jsx)("div",{style:{minHeight:282},children:i.map((function(e,i){return(0,u.jsx)("div",{className:"_dsplFlx",children:e.map((function(e,t){var r,x=e.day,_=new Date(a,n,x),j=c&&m>_,g=Math.floor(_/o),y=x&&g>v&&g<h,N=x&&g===v,D=x&&g===h,b=e.isToday,C=function(e){var a;((null===(a=(0,s.bh)((0,s.nc)()))||void 0===a?void 0:a.isAdmin)||T>0||w&&(0,s._2)(w).filter((function(e){var a,n;return(null===(a=w[e])||void 0===a?void 0:a.userId)===(null===(n=(0,s.bh)((0,s.nc)()))||void 0===n?void 0:n.userId)}))[0])&&!j&&((0,s.Rz)("isTodayPickApp",b),l(e))},w=null===f||void 0===f?void 0:f[a+"_"+n+"_"+x],T=(w&&(null===(r=(0,s._2)(w))||void 0===r||r.length),x&&!j&&p(w,b));return(0,u.jsx)("div",{className:"day_wrp ".concat(x?"":" empty_day"," ").concat(j?" disable_day":"").concat(d?" range":"").concat(b?" isToday":"").concat(x&&D?" lastActiveDay":"").concat(x&&N?" firstActiveDay":"").concat(y?" isSelected":""),children:(0,u.jsxs)("div",{className:"day_cal ",onClick:function(){return C(x)},children:[(0,u.jsx)("div",{className:"day_num ",children:x}),(0,u.jsx)("div",{className:"apps_left",children:T||""})]})},t+"_day_"+i)}))},"week_"+i)}))})]})},p=function(e,a){var n=0;if(null!==e&&void 0!==e&&e.isDayOff)return n;if(a){var i=(new Date).getHours();if(i>17)n=null;else if(i>9&&i<17){var l=0;e&&(0,s._2)(e).map((function(e){1*e.split("_")[1]>i&&(l+=1)})),n=17-i-l}else n=9-(e?(0,s._2)(e).length:0)}else n=9-(e?(0,s._2)(e).length:0);return n},_=function(e){var a=e.year,n=e.onChange,i=Array.from({length:9},(function(e,a){return a+((new Date).getFullYear()-0)})),s=(0,l.useRef)();return(0,l.useEffect)((function(){return setTimeout((function(){var e=41.6*(16+(a-(new Date).getFullYear())/3);s.current.scrollTo({x:e,y:0,animated:!0})}),20),function(){}}),[a]),(0,u.jsx)("div",{children:(0,u.jsx)("div",{ref:s,style:{maxHeight:"70vh"},className:"scrollV",children:(0,u.jsx)("div",{className:"_dsplFlx year_wrp",children:i.map((function(e){return(0,u.jsx)("div",{className:"year_tag",onClick:function(){return n(e)},children:(0,u.jsx)("div",{className:"year-itm".concat(e===a?" activeYear":""," "),children:(0,u.jsx)("div",{className:"y_num",children:e})})},e)}))})})})},j=function(e){var a,n,i=e.date,t=e.selected,c=e.onChange,v=e.close,m=new Date(i),f=m.getFullYear(),x=m.getMonth(),_=m.getDate(),j=(new Date).getHours(),y=(0,s.bh)("isTodayPickApp"),N={9:"9:00-9:59 AM",10:"10:00-10:59 AM",11:"11:00-11:59 AM",12:"12:00-12:59 PM",13:"1:00-1:59 PM",14:"2:00-2:59 PM",15:"3:00-3:59 PM",16:"4:00-4:59 PM",17:"5:00-5:59 PM"},D=((0,l.useRef)(),(0,s.bh)("AppointmentsDates")),b=f+"_"+x+"_"+_,C=null===D||void 0===D?void 0:D[b],w=(p(C,y),function(){return C&&(0,s._2)(C).filter((function(e){var a,n;return(null===(a=C[e])||void 0===a?void 0:a.userId)===(null===(n=(0,s.bh)((0,s.nc)()))||void 0===n?void 0:n.userId)}))[0]}),T=w(),k=function(){var e=1*(null===T||void 0===T?void 0:T.split("_")[1]),a=null===N||void 0===N?void 0:N[e];return(y?j<e&&a:a)&&(0,u.jsxs)("div",{children:["Tiene una cita programada ",(0,u.jsxs)("span",{children:["(",a,")"]})," "]})},F=function(e){var a=N[T.split("_")[1]],n={zIndex:950,height:"80vh",props:{minHeight:"1vh",overlay:!0}};n.content=(0,u.jsx)(g,{date:m,hour:a,confirm:function(){return a=e,void(0,d.Fv)(f+"_"+x,b,"app_"+a);var a}}),(0,r.OpenModal)(n)};return(0,u.jsxs)("div",{className:"hourlyPicker",children:[null!==(a=(0,s.bh)((0,s.nc)()))&&void 0!==a&&a.isAdmin?(0,u.jsxs)("div",{className:"_dsplFlx ",style:{margin:"4px 7px 15px"},children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)(h,{initvalue:null===C||void 0===C?void 0:C.isDayOff,keyCode:77,updChange:function(e){return a=e,(0,d.K1)(f+"_"+x,b,{isDayOff:a}),void v();var a},color:"var(--primary-hover)"}),(0,u.jsx)("span",{className:"checklabel",style:{marginLeft:6},children:"Dia Off "})]}):null,!(null!==(n=(0,s.bh)((0,s.nc)()))&&void 0!==n&&n.isAdmin)&&k()&&(0,u.jsx)("div",{className:"title_appts_confirmed",children:k()}),(0,u.jsx)("div",{className:"_dsplFlx year_wrp",children:!(null!==C&&void 0!==C&&C.isDayOff)&&[9,10,11,12,13,14,15,16,17].map((function(e,a){var n,i=null===C||void 0===C?void 0:C["app_"+e],l=(null===i||void 0===i?void 0:i.userId)===(null===(n=(0,s.bh)((0,s.nc)()))||void 0===n?void 0:n.userId);return y&&j>e||i&&!l?(0,u.jsx)("div",{className:"year_tag ".concat(i?"hasTaken":"")},e):(0,u.jsx)("div",{className:"year_tag ".concat(i?"hasTaken":"").concat(l?" youAlreadyHave":""),onClick:function(){return function(e){var a,n,i,l=w(),t=(null===C||void 0===C||null===(a=C[l])||void 0===a?void 0:a.userId)===(null===(n=(0,s.bh)((0,s.nc)()))||void 0===n?void 0:n.userId);t&&1*l.split("_")[1]===1*e?F(e):null!==(i=(0,s.bh)((0,s.nc)()))&&void 0!==i&&i.isAdmin?c(e):t?(0,o.OpenToast)({text:"No puede hacer dos reservas el mismo dia",timeout:1500}):c(e)}(e)},children:(0,u.jsx)("div",{className:"year-itm".concat(e===t?" activeYear":""),children:(0,u.jsx)("div",{className:"y_num",children:i?l?"reservado ":"-":N[e]})})},e)}))})]})},g=function(e){var a=e.data,n=e.date,i=e.hour,l=e.confirm,t=function(){a.modalID&&(0,r.CloseModal)({id:a.modalID})};return(0,u.jsxs)("div",{type:"Free",className:"idfmDQ",children:[(0,u.jsx)("div",{className:" gPHWco",children:(0,u.jsx)("div",{className:"dcXXTq ",children:(0,u.jsx)("div",{className:"eKdSaJ",children:(0,u.jsxs)("div",{className:" jVaMjA dBwXbT",children:[(0,u.jsx)("div",{className:" date_calendar_header_yearmonth title_cancel_app",children:"Desea cancelar su cita  "}),(0,u.jsxs)("div",{className:"_dsplFlx date_calendar_header",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("span",{children:(0,s.sG)(n)}),(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("span",{style:{marginLeft:16},children:i}),(0,u.jsx)("div",{className:"flexSpace"})]})]})})})}),(0,u.jsxs)("div",{className:"_dsplFlx calendar_action_group",children:[(0,u.jsx)("div",{className:"flexSpace"}),(0,u.jsx)("div",{onClick:t,className:"_dsplFlx",children:(0,u.jsx)("div",{className:"btn_cal_cancel",children:"Cancel"})}),(0,u.jsx)("div",{onClick:function(){t(),l()},children:(0,u.jsx)("div",{className:"_dsplFlx",style:{marginLeft:16,marginRight:8},children:(0,u.jsx)("div",{className:"btn_cal_confirm",children:"Confirmar"})})})]})]})}},5945:function(e,a,n){n.d(a,{Fv:function(){return f},K1:function(){return m},Y2:function(){return x},hW:function(){return v}});var i=n(4942),l=n(4702),s=n(6321),t=n(2735);var r=JSON.parse((0,t.yX)("eyJhcGlLZXkiOiJBSXphU3lDeDBFcnFmbENVdXZpRlRqald4SEFITWpvQjBsd2xGX00iLCJhdXRoRG9tYWluIjoiaHJtLTExMjguZmlyZWJhc2VhcHAuY29tIiwiZGF0YWJhc2VVUkwiOiJodHRwczovL2hybS0xMTI4LmZpcmViYXNlaW8uY29tIiwicHJvamVjdElkIjoiaHJtLTExMjgiLCJzdG9yYWdlQnVja2V0IjoiaHJtLTExMjguYXBwc3BvdC5jb20iLCJtZXNzYWdpbmdTZW5kZXJJZCI6IjEwNDkyNTA1ODUyNDUiLCJhcHBJZCI6IjE6MTA0OTI1MDU4NTI0NTp3ZWI6OGI0ZTA3NGI5Yzg4MDA1ZiJ9")),d={},c=(0,l.ZF)(r),o=(0,s.ad)(c),u=null,v=function(e){u&&u(),h(e)},h=function(e){var a=(0,s.hJ)(o,"hhh",e,"params");return u=(0,s.cf)(a,(function(e){e.docChanges().forEach((function(e){var a=e.doc.id,n=e.doc.data();d[a]=n,(0,t.Rz)("grabberAcc",d),(0,t.wt)("firebaseObs"),setTimeout((function(){(0,t.wt)("firebaseObs")}),250)}))})),null},m=function(e,a){var n=(0,s.JU)(o,"hhh",e,"params",e);(0,s.pl)(n,a,{merge:!0})},f=function(e,a){var n=(0,s.JU)(o,"hhh",e,"params",e);(0,s.r7)(n,(0,i.Z)({},a,(0,s.AK)()))},x=function(){var e=(0,s.JU)(o,"Carrousel","global");return(0,s.cf)(e,(function(e){var a=e.data();(0,t.Rz)("usersGbList",a.userList),(0,t.Rz)("usersGbObj",(0,t.ME)(a.userList,"id")),(0,t.wt)("firebaseObs"),setTimeout((function(){(0,t.wt)("firebaseObs")}),250)})),null}},2004:function(){}}]);
//# sourceMappingURL=137.9296b289.chunk.js.map