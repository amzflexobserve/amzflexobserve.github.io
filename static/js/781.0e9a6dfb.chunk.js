"use strict";(self.webpackChunkgrabber_hrm=self.webpackChunkgrabber_hrm||[]).push([[781],{8106:function(e,l,i){i.r(l),i.d(l,{sortCust:function(){return T}});var s=i(4165),n=i(1413),a=i(5861),r=i(4942),o=i(9439),d=i(2791),c=(i(4629),i(2647)),t=i(7689),v=i(1087),u=i(2735),h=i(5945),m=i(5408),x=i(9752),p=i(8457),b=i(8575),j=i(9760),f=(i(899),i(2908)),k=(i(3569),i(3505)),_=i(7677),g=i(184),N=(0,c.YZ)(),y=(0,c.A5)(),w=(0,c.PU)(),z=(0,c.tW)();l.default=function(e){e.data,e.confirm,e.label,e.item;var l,i,c,T,S,A,C,Z,I=(0,d.useState)(1),L=(0,o.Z)(I,2)[1],W=(0,d.useState)(1),V=(0,o.Z)(W,2),M=V[0],R=V[1],D=(0,m.Z)("firebaseObs"),E=(0,d.useState)(!1),G=(0,o.Z)(E,2),K=G[0],O=G[1];console.log(D);var H=null===(l=(0,t.TH)().search)||void 0===l||null===(i=l.split("?"))||void 0===i?void 0:i[1],U=(0,u.mB)(H),q=(null===(c=(0,u.bh)((0,u.nc)()))||void 0===c?void 0:c.isAdmin)&&K,Y=q&&(0,u.bh)("user2Show")||(null===U||void 0===U?void 0:U.cId)||(null===(T=(0,u.bh)((0,u.nc)()))||void 0===T?void 0:T.grabberId);(0,d.useEffect)((function(){var e;(0,u.wt)("firebaseObs"),Y&&(0,h.hW)(Y),null!==(e=(0,u.bh)((0,u.nc)()))&&void 0!==e&&e.isAdmin&&!(0,u.bh)("usersGbList")&&(0,h.Y2)(),setTimeout((function(){L((0,u.M5)())}),450)}),[Y]);var P=function(e,l){J((0,r.Z)({},e,l)),L((0,u.M5)())},Q=function(e){},$=null===(S=(0,u.bh)("grabberAcc"))||void 0===S?void 0:S[Y],J=function(e){(0,h.K1)(Y,e),L((0,u.M5)())},X=null!==$&&void 0!==$&&$.filters?(0,u._2)($.filters).sort():[],ee=function(){var e=["dom","lun","mar","mie","jue","vie","sab"],l=[];return(0,u._2)(null===$||void 0===$?void 0:$.schedule).map((function(i){var s;null!==$&&void 0!==$&&null!==(s=$.schedule[i])&&void 0!==s&&s.active&&l.push(e[i])})),{activesDays:l.join(", "),hasAlert:l.length<7}},le=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var l,i,a,r,o,d,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(2),(i=(0,n.Z)({},null===(l=(0,u.bh)((0,u.hQ)()))||void 0===l?void 0:l.scan_grb_flx)).params={flexId:Y,":search0":"success"},a=(0,u.I7)(i),e.next=6,a;case 6:(r=e.sent)&&!r.error&&(o={},d=(0,u.Ei)(),(0,u._2)(r).map((function(e){var l=r[e];10===l.startTime.toString().length&&(l.startTime=1e3*l.startTime,l.endTime=1e3*l.endTime);var i=(0,u.qt)(l.startTime),s=i.stWk+"_"+i.endWk;o[s]||(o[s]={blocks:{},total:0}),o[s].blocks[l.startTime]||(o[s].blocks[l.startTime]={}),o[s].blocks[l.startTime]=l,"9"!==l.isRejected&&l.endTime<d&&(o[s].total+=1*l.pay)})),(0,u.Rz)("blockWkList",o),c=(0,u.bh)("blockWkList")?(0,u._2)(o).sort().reverse():[],(0,u.Rz)("blockWkSorted",c),L((0,u.M5)()));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){(null===$||void 0===$?void 0:$.puzzleNeedBeSolved)&&(null===$||void 0===$?void 0:$.puzzleUrl)&&window.open(null===$||void 0===$?void 0:$.puzzleUrl)},se=function(){(0,h.K1)(Y,{running:!0,allowGrabbing:!0,puzzleNeedBeSolved:!1})};return null!==$&&void 0!==$&&$.email?(0,g.jsxs)("div",{style:{width:"100%"},children:[(0,g.jsxs)("div",{className:"ebEwoI",children:[(0,g.jsx)("div",{className:"jKZvHt ",children:(0,g.jsx)(v.OL,{className:"",to:"/",children:(0,g.jsx)("div",{className:" header_mobile ",children:(0,g.jsx)(w,{name:"arrowBack",color:"#AAABC5",size:28})})})}),(0,g.jsxs)("div",{className:"_dsplFlx ",children:[q?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"_dsplFlx centerBx",children:(0,g.jsx)(y,{init:(0,u.bh)("user2Show"),lbl_empty:"Users",list:(0,u.bh)("usersGbList")||[],onSelect:function(e){return l=e.id,(0,u.Rz)("user2Show",l),(0,u.Rz)("blockWkList",null),void(1===M?L((0,u.M5)()):R(1));var l},background:"var(--dark-900)",color:"var(--light-200)",direction:"right",width:"290px"})})}):(0,g.jsx)("div",{className:"_dsplFlx centerBx",children:null===$||void 0===$?void 0:$.email}),null!==(A=(0,u.bh)((0,u.nc)()))&&void 0!==A&&A.isAdmin?(0,g.jsx)("div",{className:"_dsplFlx centerBx",style:{marginLeft:15},children:(0,g.jsx)(N,{initvalue:K,keyCode:89,updChange:O,color:"#30BEFF"})}):null]})]}),(0,g.jsx)("div",{className:"card_wrpp",style:{marginTop:90},children:(0,g.jsx)(x.he,{title:(0,g.jsx)("div",{className:"_dsplFlx  ",children:null!==$&&void 0!==$&&$.puzzleNeedBeSolved?(0,g.jsx)("div",{className:"lh-default indianred",style:{marginBottom:20},children:(0,g.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",onClick:function(){var e={zIndex:480,props:{minHeight:"1vh",overlay:!0}};e.content=(0,g.jsx)(f.Z,{confirm:se,openUrl:ie}),(0,j.OpenModal)(e)},children:(0,g.jsxs)("div",{className:"_dsplFlx keyToken ",children:[(0,g.jsx)(w,{name:"puzzle-outline",color:"var(--lighten-color)",size:20}),"Necesita Resolver el Rompecabeza"]})})}):(0,g.jsx)("div",{className:"lh-default hrm_themecolor ".concat(null!==$&&void 0!==$&&$.isValidToken?"limegreen":"darkred peachpuff indianred"),style:{marginBottom:20},children:(0,g.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",onClick:function(){q&&(0,h.K1)(Y,{isValidToken:!(null!==$&&void 0!==$&&$.isValidToken)})},children:(0,g.jsxs)("div",{className:"_dsplFlx keyToken ",children:[(0,g.jsx)(w,{name:null!==$&&void 0!==$&&$.isValidToken?"thumb_up_ntflx":"info",color:"var(--lighten-color)",size:20}),null!==$&&void 0!==$&&$.isValidToken?"Todo funcionando bien":"Hubo un error contactenos"]})})})}),description:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"_dsplFlx information_detail ",style:{minWidth:320}}),(0,g.jsxs)("div",{className:"_dsplFlx information_detail ".concat(null!==$&&void 0!==$&&$.puzzleNeedBeSolved?"indianred hrm_themecolor ":"","  "),children:[(0,g.jsx)("div",{children:(0,g.jsx)("div",{style:{width:"20px"},children:(0,g.jsxs)("svg",{"aria-label":"currently running",width:"100%",height:"100%",fill:"none",viewBox:"0 0 16 16",className:null!==$&&void 0!==$&&$.running?"anim-rotate":"",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.jsx)("path",{stroke:null!==$&&void 0!==$&&$.puzzleNeedBeSolved?"var(--lighten-color)":null!==$&&void 0!==$&&$.isValidToken?"#60EF40":"#F9D0C4",strokeWidth:"2",d:"M3.05 3.05a7 7 0 1 1 9.9 9.9 7 7 0 0 1-9.9-9.9Z",opacity:".5"}),(0,g.jsx)("path",{fill:null!==$&&void 0!==$&&$.puzzleNeedBeSolved?"var(--lighten-color)":null!==$&&void 0!==$&&$.isValidToken?"#60EF40":"#F9D0C4",fillRule:"evenodd",d:"M8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Z",clipRule:"evenodd"}),(0,g.jsx)("path",{fill:null!==$&&void 0!==$&&$.puzzleNeedBeSolved?"var(--lighten-color)":null!==$&&void 0!==$&&$.isValidToken?"#60EF40":"#F9D0C4",d:"M14 8a6 6 0 0 0-6-6V0a8 8 0 0 1 8 8h-2Z"})]})})}),(0,g.jsx)("span",{className:"checklabel",children:"Activo"}),(0,g.jsx)("div",{className:"flexSpace"}),(0,g.jsx)(N,{initvalue:!(null===$||void 0===$||!$.running),keyCode:89,updChange:function(e){return P("running",e)},color:"var(--primary-blue--backg-30)"})]}),(0,g.jsxs)("div",{className:"_dsplFlx information_detail ",style:{margin:"13px 0"},children:[(0,g.jsx)("div",{children:(0,g.jsx)(w,{name:"open_package_file_outline",color:"#AAABC5",size:20})}),(0,g.jsx)("span",{className:"checklabel",children:"Aceptar Bloques"}),(0,g.jsx)("div",{className:"flexSpace"}),(0,g.jsx)(N,{initvalue:!(null===$||void 0===$||!$.allowGrabbing),keyCode:89,updChange:function(e){return P("allowGrabbing",e)},color:"var(--primary-blue--backg-30)"})]}),(0,g.jsxs)("div",{className:"_dsplFlx information_detail ",style:{margin:"13px 0"},onClick:function(e,l){var i=null!==$&&void 0!==$&&$.schedule?(0,u._2)($.schedule).sort():[],s={zIndex:480,props:{minHeight:"1vh",overlay:!0}};s.content=(0,g.jsx)(b.Z,{confirm:Q,sortedSch:i,schedule:null===$||void 0===$?void 0:$.schedule,updFb:J,email:null===$||void 0===$?void 0:$.email}),(0,j.OpenModal)(s)},children:[(0,g.jsx)("div",{children:(0,g.jsx)(w,{name:"calendar",color:"#AAABC5",size:20})}),(0,g.jsx)("span",{className:"checklabel",children:"Horarios"}),(0,g.jsx)("div",{className:"flexSpace"}),(0,g.jsx)("div",{className:"flexSpace"}),(0,g.jsx)("span",{className:"checklabel",children:null===(C=ee())||void 0===C?void 0:C.activesDays}),null!==(Z=ee())&&void 0!==Z&&Z.hasAlert?(0,g.jsx)("div",{style:{marginLeft:7},children:(0,g.jsx)(w,{name:"alert",color:"#DBAB0A",size:20})}):null]})]})})}),(0,g.jsxs)("div",{className:"_dsplFlx spaceAround flxWrp",style:{padding:9},children:[(0,g.jsx)("div",{className:"lh-default blue_30",style:{margin:"20px 0"},children:(0,g.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",onClick:function(){return R(1)},children:(0,g.jsxs)("div",{className:"_dsplFlx keyToken ",children:[(0,g.jsx)(w,{name:"market",color:"#30BEFF",size:20}),"Estaciones"]})})}),(0,g.jsx)("div",{className:"lh-default hrm_themecolor darkcyan_green",style:{marginTop:20},children:(0,g.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",onClick:le,children:(0,g.jsxs)("div",{className:"_dsplFlx keyToken ",children:[(0,g.jsx)(w,{name:"open_package_file_outline",color:"var(--lighten-color)",size:20}),"Bloques"]})})})]}),(0,g.jsx)("div",{className:"_dsplFlx spaceAround flxWrp",style:{padding:9},children:null!==$&&void 0!==$&&$.showAvailablesBlocks?(0,g.jsx)("div",{className:"lh-default hrm_themecolor yellow",style:{marginTop:2},children:(0,g.jsx)("div",{className:"IssueLabel hrm_labelColor hrm_label_14lh",onClick:function(){R(3),setTimeout((0,a.Z)((0,s.Z)().mark((function e(){var l,i,a,r,o,d,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=(0,n.Z)({},null===(l=(0,u.bh)((0,u.hQ)()))||void 0===l?void 0:l.grb_ava_tmSt_flx)).params={date:B(),":search0":"available",":search1":Y},a=(0,u.I7)(i),e.next=5,a;case 5:(r=e.sent)&&!r.error&&((0,u.Rz)("availableBlocksList",r),o=(0,u._2)(r).sort().reverse(),d={},c={},o.map((function(e){var l=e.split("_"),i=1*l[3]/l[4]*1,s=new Date(1e3*l[0]),n=(0,u.kj)(s);d[n]||(d[n]=[]),d[n].push(e),c[n]||(c[n]=[]),i>18&&c[n].push(e)})),(0,u.Rz)("availableBlocksPriceIncrease",c),(0,u.Rz)("availableBlocksGroupsSorted",d),L((0,u.M5)()));case 7:case"end":return e.stop()}}),e)}))),320)},children:(0,g.jsxs)("div",{className:"_dsplFlx keyToken ",children:[(0,g.jsx)(w,{name:"open_package_file_outline",color:"var(--lighten-color)",size:20}),"Bloques Disponibles"]})})}):null}),(0,g.jsx)(F,{viewId:1,activeView:M,children:X&&X.map((function(e){var l,i;return(0,g.jsx)(p.Z,{icon:"market",data:null===(l=$.filters)||void 0===l?void 0:l[e],advanceFilters:null===(i=$.advanceFilters)||void 0===i?void 0:i[e],sA:e,updSArea:function(l){return function(e,l){var i=null===$||void 0===$?void 0:$.filters;i[l]=Object.assign({},i[l],e),(0,h.K1)(Y,{filters:i})}(l,e)},updAdvFlt:function(l){return function(e,l){var i=(null===$||void 0===$?void 0:$.advanceFilters)||{};i[l]=Object.assign({},i[l],e),(0,h.Fv)(Y,"advanceFilters"),(0,h.K1)(Y,{advanceFilters:i})}(l,e)}},e)}))}),(0,g.jsx)(F,{viewId:2,activeView:M,children:(0,u.bh)("blockWkList")&&(0,u.bh)("blockWkSorted").map((function(e){var l,i,s,n,a=1*e.split("_")[0],r=1*e.split("_")[1]-867e5,o=null===(l=(0,u.bh)("blockWkList"))||void 0===l||null===(i=l[e])||void 0===i?void 0:i.blocks;return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"_dsplFlx keyToken ",children:[(0,g.jsx)("div",{className:"flexSpace"}),(0,g.jsx)("div",{className:"lh-default ",children:(0,u.sG)(a)+" - "+(0,u.sG)(r)}),(0,g.jsx)("div",{className:"flexSpace"}),(0,g.jsxs)("div",{className:" payments hrm_themecolor darkcyan_green centerBx",children:[(0,g.jsx)(w,{name:"money",size:22,color:"var(--lighten-color)"}),(0,g.jsxs)("span",{className:"total_week",children:["$",(null===(s=(0,u.bh)("blockWkList"))||void 0===s||null===(n=s[e])||void 0===n?void 0:n.total).toFixed(2)]})]}),(0,g.jsx)("div",{className:"flexSpace"})]}),(0,g.jsx)(_.Z,{refresh:le,cId:Y,blocks:o,wK:e})]},e)}))}),(0,g.jsx)(F,{viewId:3,activeView:M,children:(0,g.jsx)(k.Z,{cId:Y})}),(0,g.jsx)("div",{className:"_dsplFlx ",style:{padding:9,marginBottom:149}})]}):(0,g.jsx)("div",{className:"loading_app centerBx",children:(0,g.jsx)(z,{stroke:"var(--primary-blue--backg-30)",size:94,strokeW:3})})};var F=function(e){var l=e.viewId,i=e.activeView,s=e.children;return(0,g.jsx)("div",{className:"opacityView",style:{opacity:l===i?1:0,marginTop:29},children:l===i?s:null})};function B(e){var l=e||new Date,i=l.getMonth()+1,s=l.getDate();return"".concat(l.getFullYear(),"_").concat(i>9?i:"0"+i,"_").concat(s>9?s:"0"+s)}var T=function(e,l){return e&&e.sort((function(e,i){var s=l(e),n=l(i);return s<n?1:s>n?-1:0}))}}}]);
//# sourceMappingURL=781.0e9a6dfb.chunk.js.map